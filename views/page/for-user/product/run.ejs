<script>
    <%- include('../../../assets/js/zepto.js') %>
    <%- include('../../../assets/js/carousel.min.js') %>
    <%- include('../../../assets/js/event.js') %>
    <%- include('../../../assets/js/magnifer.min.js') %>
</script>
<script>
  class INIT{

    constructor(){
      this.goodsRest = $("#goodsRest")
    }

    initEventMagnifier(){
      const evt = new Event(),
      m = new Magnifier(evt)
      m.attach({
        thumb: '#magnifier-source',
        largeWrapper: 'preview',
        zoom: 2,
        zoomable: true
      });
    }
    
    initGoodsInput(){
      const ele = $("#goodsRest")
      ele.on('input', (e) => {
        const value = !!e && e.value || e.target.value
        if(Number(value) > ele.attr('data-rest')){
          $('#buyNow, #addToCar').attr('disabled', 'true') 
          $('#tip-rest').removeClass('is-hidden')
        }else{
          $('#tip-rest').attr('class','is-hidden')
          $('#buyNow, #addToCar').attr('disabled', 'false')
        }
      })
    }

  }
  $(function(){
    const init = new INIT()
    init.initEventMagnifier()
    init.initGoodsInput()
  })
</script>